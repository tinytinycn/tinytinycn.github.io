<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> python-06-面向对象编程 · hang 's blogs</title><meta name="description" content="python-06-面向对象编程 - hang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/tinytinycn.github.io/favicon.png"><link rel="stylesheet" href="/tinytinycn.github.io/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://github.com/atom.xml" title="hang 's blogs"></head><body><div class="wrap"><header><a href="/tinytinycn.github.io/" class="logo-link"><img src="/tinytinycn.github.io/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/tinytinycn.github.io/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/tinytinycn.github.io/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/tinytinycn.github.io/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">python-06-面向对象编程</h1><div class="post-info">Sep 12, 2018</div><div class="post-content"><h3 id="类＆实例"><a href="#类＆实例" class="headerlink" title="类＆实例"></a>类＆实例</h3><ul>
<li><p>定义一个类, 创建实例的模板</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class Student(object):</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建实例, 各个实例拥有的数据独立, 互不影响</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiny = Student()</span><br></pre></td></tr></table></figure>
</li>
<li><p>自由绑定任何数据, ‘应该’在初始化时强制绑定必须的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tiny.name=&apos;tinytinycn&apos;</span><br><span class="line"></span><br><span class="line">class Student(object):</span><br><span class="line">    def __init__(self, name, score):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.score=score</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>__init__</code>方法第一个参数永远是self, 代表实例本身, 上述例子传入参数，则实例化时必须传入参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiny = Student(&apos;tinytinycn&apos;,99)</span><br></pre></td></tr></table></figure>
</li>
<li><p>数据封装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Student(object):</span><br><span class="line">    def __init__(self,name,score):</span><br><span class="line">        self.name=name</span><br><span class="line">        self.score=score</span><br><span class="line">    def print_score(self):</span><br><span class="line">        print(self.name,self.score)</span><br></pre></td></tr></table></figure>
</li>
<li><p>方法, 与实例绑定的函数, 可以直接访问实例的数据. 与普通函数不同的是必须接收一个self参数．</p>
</li>
</ul>
<h3 id="访问限制"><a href="#访问限制" class="headerlink" title="访问限制"></a>访问限制</h3><ul>
<li><p><code>__</code>开头变量名, 私有变量, 只有内部可以访问, 外部不能访问</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Studen(object):</span><br><span class="line">    def __init__(self, name, score):</span><br><span class="line">        self.__name=name</span><br><span class="line">        self.__score=score</span><br><span class="line">    def print_score(self):</span><br><span class="line">        print(self.__name,self.__score)</span><br><span class="line"></span><br><span class="line">tiny = Student(&apos;tinytinycn&apos;, 99)</span><br><span class="line">tiny.__name //不能访问</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>__xxx__</code>特殊变量, 可以外部直接访问, 不是private变量</p>
</li>
</ul>
<h3 id="继承＆多态"><a href="#继承＆多态" class="headerlink" title="继承＆多态"></a>继承＆多态</h3><ul>
<li>继承, 把父类的所有功能都直接拿过来，子类只需要新增自己特有的方法，也可以把父类不适合的方法覆盖重写</li>
<li>动态语言的鸭子类型特点决定了继承不像静态语言那样是必须的。</li>
<li>多态, 动态语言不需要严格的继承体系, 一个对象看起来像鸭子, 走路起来想鸭子就会被当作鸭子.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Animal(object):</span><br><span class="line">    def run(self):</span><br><span class="line">        print(&apos;animal is running..&apos;)</span><br><span class="line"></span><br><span class="line">class Dog(Animal):</span><br><span class="line">    def run(self):</span><br><span class="line">        print(&apos;dog is running..&apos;)</span><br><span class="line"></span><br><span class="line">class Duck(Animal):</span><br><span class="line">    def run(self):</span><br><span class="line">        print(&apos;duck is running..&apos;)</span><br><span class="line"></span><br><span class="line">def run_twice(animal):</span><br><span class="line">    animal.run()</span><br><span class="line">    animal.run()</span><br><span class="line"></span><br><span class="line">run_twice(Animal())</span><br><span class="line">run_twice(Dog()) //保证传入的实例有run()方法即可</span><br><span class="line">run_twice(Duck())</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="获取对象信息"><a href="#获取对象信息" class="headerlink" title="获取对象信息"></a>获取对象信息</h3><ul>
<li><p>type(x)函数, 判断对象类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type(123)==type(456)</span><br><span class="line">type(123)==int</span><br><span class="line">type(&apos;abc&apos;)==type(&apos;edf&apos;)</span><br><span class="line">type(&apos;abc&apos;)==str</span><br><span class="line"></span><br><span class="line">import types</span><br><span class="line">def fn():</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">type(fn)==types.FunctionType</span><br><span class="line">type(abs)==types.BuiltinFunctionType</span><br><span class="line">type(lambda x:x)==types.LambdaType</span><br><span class="line">type((x for x in range(5)))==types.GeneratorType</span><br></pre></td></tr></table></figure>
</li>
<li><p>isinstance(x,y)函数, 判断class类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//继承关系: object -&gt; Animal　-&gt; Dog -&gt; Husky</span><br><span class="line">a = Animal()</span><br><span class="line">d = Dog()</span><br><span class="line">h = Husky()</span><br><span class="line">isinstance(h, Husky)  //True</span><br><span class="line">isinstance(h, Dog)    //True</span><br><span class="line">isinstance(h, Animal) //True</span><br><span class="line">isinstance(h, object) //True</span><br><span class="line"></span><br><span class="line">isinstance(123, int)</span><br><span class="line">isinstance(&apos;abc&apos;, str)</span><br><span class="line">isinstance(b&apos;abc&apos;, bytes)</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断变量是某些类型中的一种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isinstance([1,2,3], (list, tuple))//True</span><br><span class="line">isinstance((1,2,3), (list, tuple))//True</span><br></pre></td></tr></table></figure>
</li>
<li><p>dir()函数, 获取对象的所有属性和方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir(123)</span><br></pre></td></tr></table></figure>
</li>
<li><p>getattr()/setattr()/hasattr()操作对象的状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class MyObject(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.x=666</span><br><span class="line">    def power(self):</span><br><span class="line">        return self.x*self.x</span><br><span class="line"></span><br><span class="line">obj = MyObject()</span><br><span class="line">hasattr(obj, &apos;x&apos;)//是否有属性x</span><br><span class="line">setattr(obj, &apos;x&apos;, 777)//设置属性x=777</span><br><span class="line">getattr(obj, &apos;x&apos;)//获取属性x</span><br><span class="line">getattr(obj, &apos;z&apos;, 999)//获取属性z, 若不存在则返回默认999</span><br><span class="line">fn = getattr(obj, &apos;power&apos;)//获取方法power, 赋值给变量fn, fn()即可调用obj.power()方法</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="实例属性-amp-类属性"><a href="#实例属性-amp-类属性" class="headerlink" title="实例属性 &amp; 类属性"></a>实例属性 &amp; 类属性</h3><ul>
<li><p>类创建的实例可以绑定任意属性, 实例属性通过实例变量或self变量绑定</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Student(object):</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name=name</span><br><span class="line"></span><br><span class="line">s = Student(&apos;tiny&apos;)</span><br><span class="line">s.name = &apos;tinytinycn&apos;</span><br><span class="line">s.score = 99 //任意绑定</span><br></pre></td></tr></table></figure>
</li>
<li><p>类属性直接在class中定义属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Student(object):</span><br><span class="line">    name = &apos;student&apos;</span><br><span class="line"></span><br><span class="line">s = Student()</span><br><span class="line">print(s.name) //实例没有name属性, 搜索class的name属性</span><br><span class="line">print(Student.name) //直接访问class的name属性</span><br><span class="line">s.name = &apos;tiny&apos; //绑定实例name属性, class属性&apos;被屏蔽&apos;</span><br><span class="line">print(s.name) //实例name属性</span><br><span class="line">print(Student.name) //直接class的name属性</span><br><span class="line">del s.name //删除实例name属性</span><br><span class="line">print(s.name) //实例没有name属性, 搜索class的name属性</span><br></pre></td></tr></table></figure>
</li>
<li><p>实例属性属于各个实例, 互不干扰</p>
</li>
<li><p>类属性属于类所有, 所有实例共享一个属性</p>
</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/tinytinycn.github.io/2018/09/13/python-07-面向对象高级编程/" class="prev">上一篇</a><a href="/tinytinycn.github.io/2018/09/12/python-05-模块/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2019 <a href="http://github.com">hang</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>