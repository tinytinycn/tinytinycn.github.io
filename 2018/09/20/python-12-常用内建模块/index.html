<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> python-12-常用内建模块 · hang 's blogs</title><meta name="description" content="python-12-常用内建模块 - hang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/tinytinycn.github.io/favicon.png"><link rel="stylesheet" href="/tinytinycn.github.io/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://github.com/atom.xml" title="hang 's blogs"></head><body><div class="wrap"><header><a href="/tinytinycn.github.io/" class="logo-link"><img src="/tinytinycn.github.io/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/tinytinycn.github.io/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/tinytinycn.github.io/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/tinytinycn.github.io/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">python-12-常用内建模块</h1><div class="post-info">Sep 20, 2018</div><div class="post-content"><h3 id="datetime日期时间"><a href="#datetime日期时间" class="headerlink" title="datetime日期时间"></a>datetime日期时间</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime</span><br><span class="line"></span><br><span class="line">now=datetime.now()                # 获取当前时间</span><br><span class="line">dt=datetime(2018, 09, 15, 12, 12) # 指定时间</span><br><span class="line">ts=dt.timestamp()                 # datetime类型 &gt; timestamp时间戳(注意:浮点数,小数为代表毫秒数)</span><br><span class="line">dt2=datetime.fromtimestamp(ts)    # timestamp时间戳 &gt; datetime类型</span><br><span class="line">dt3=datetime.utcfromtimestamp(t)  # timestamp时间戳 &gt; UTC时间</span><br><span class="line">dt4=datetime.strptime(&apos;2018-09-15 12:12:12&apos;, &apos;%Y-%m-%d %H:%M:%S&apos;) # str &gt; datetime类型</span><br><span class="line">dt5=datetime.now()</span><br><span class="line">dt5.strftime(&apos;%a, %b %d %H:%M&apos;) //Fri, Sep 15 12:12 datetime类型 &gt; str</span><br></pre></td></tr></table></figure>

<ul>
<li><p>日期计算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime, timedelta</span><br><span class="line"></span><br><span class="line">now=datetime.now()</span><br><span class="line">now+timedelta(hours=10)</span><br><span class="line">now-timedelta(days=1)</span><br><span class="line">now+timedelta(days=2, hours=12)</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建时区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime, timedelta, timezone</span><br><span class="line"></span><br><span class="line">tz_utc_8=timezone(timedelat(hours=8)) # 创建UTC+8:00时区</span><br><span class="line">now=datetime.now()</span><br><span class="line">dt=now.replace(tzinfo=tz_utc_8)       # 为dt强制设置一个时区</span><br></pre></td></tr></table></figure>
</li>
<li><p>时区转换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">utc_dt=datetime.utcnow().replace(tzinfo=timezone.utc)  # 获取utc时间, 强制设置为UTC+0:00时区</span><br><span class="line">bj_dt=utc_dt.astimezone(timezone(timedelta(hours=8))) # 转换成UTC+8:00时区对应时间</span><br><span class="line">dj_dt=utc_dt.astimezone(timezone(timedelta(hours=9))) # 转换成UTC+9:00时区对应时间</span><br><span class="line">dj_dt=bj_dt.astimezone(timezone(timedelta(hours=9))) # UTC+8:00 &gt; UTC+9:00</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="collections集合"><a href="#collections集合" class="headerlink" title="collections集合"></a>collections集合</h3><ul>
<li><p>nametuple(‘名称’, [属性list])函数, 创建一个自定义tuple对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from collections import namedtuple</span><br><span class="line"></span><br><span class="line">point=namedtuple(&apos;point&apos;, [&apos;x&apos;,&apos;y&apos;])</span><br><span class="line">p=point(1,2)</span><br><span class="line">p.x //1</span><br><span class="line">p.y //2</span><br></pre></td></tr></table></figure>
</li>
<li><p>deque高效实现插入删除的双向列表, 适合队列和堆栈</p>
</li>
<li><p>deque除了实现list的append()/pop()函数, 还支持appendleft()/popleft()函数从头部添加删除元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import collections import deque</span><br><span class="line"></span><br><span class="line">q=deque([&apos;a&apos;,&apos;b&apos;,&apos;c&apos;])</span><br><span class="line">q.append(&apos;x&apos;)</span><br><span class="line">q.appendleft(&apos;y&apos;)</span><br><span class="line">q //[&apos;y&apos;,&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;x&apos;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>defaultdict()函数实现不存在key对应元素时,支持默认返回值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from collections import defaultdict</span><br><span class="line"></span><br><span class="line">dd=defaultdict(lambda:&apos;N/A&apos;)</span><br><span class="line">dd[&apos;k1&apos;]=&apos;abc&apos;</span><br><span class="line">dd[&apos;k1&apos;] //&apos;abc&apos;</span><br><span class="line">dd[&apos;k2&apos;] //不存在, 返回默认值&apos;N/A&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>OrderedDict()函数实现保持key顺序元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from collections import OrderedDict</span><br><span class="line"></span><br><span class="line">od=OrderedDict([(&apos;a&apos;,1),(&apos;b&apos;,2),(&apos;c&apos;,3)])</span><br><span class="line">od //保持key的有序性</span><br><span class="line">od[&apos;d&apos;]=4</span><br><span class="line">od[&apos;c&apos;]=3</span><br><span class="line">od.keys() //[&apos;a&apos;, &apos;b&apos;, &apos;d&apos;, &apos;c&apos;] 注意: 当插入新key时, 总是根据插入时的顺序保持key的排序位置</span><br></pre></td></tr></table></figure>
</li>
<li><p>Counter()计数器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from collections import Counter</span><br><span class="line"></span><br><span class="line">c=Counter()</span><br><span class="line">for ch in &apos;python&apos;:</span><br><span class="line">    c[ch]=c[ch]+1</span><br><span class="line"></span><br><span class="line">c //实际上, Counter是dict子类</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="base64"><a href="#base64" class="headerlink" title="base64"></a>base64</h3><ul>
<li>Base64一种用64个字符标志任意二进制数据的方法(把3个字节二进制变成4个字节字符串, 不足3倍末尾补\x00, 在编码后末尾加=或==)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import base64</span><br><span class="line"></span><br><span class="line">base64.b64encode(b&apos;binary\x00string&apos;) //YmluYXJ5AHN0cmluZw==</span><br><span class="line">base64.b64decode(b&apos;YmluYXJ5AHN0cmluZw==&apos;) //b&apos;binary\x00string&apos;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="hashlib"><a href="#hashlib" class="headerlink" title="hashlib"></a>hashlib</h3><ul>
<li>摘要算法又称哈希算法,散列算法, 通过一个函数, 讲任意长度的数据转换为一个长度固定的数据串(通常用16进制的字符串表示)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import hashlib</span><br><span class="line"></span><br><span class="line">md5 = hashlib.md5()</span><br><span class="line">md5.update(&apos;hello, world&apos;.encode(&apos;utf-8&apos;))</span><br><span class="line">print(md5.hexdigest())</span><br><span class="line"></span><br><span class="line">md55=hashlib.md5()</span><br><span class="line">md55.update(&apos;hello,&apos;.encode(&apos;utf-8&apos;))</span><br><span class="line">md55.update(&apos; world&apos;.encode(&apos;utf-8&apos;))</span><br><span class="line">print(md55.hexdigest())</span><br><span class="line"></span><br><span class="line">sha1=hashlib.sha1()</span><br><span class="line">sha1.update(&apos;hello, world&apos;.encode(&apos;utf-8&apos;))</span><br><span class="line">print(sha1.hexdigest())</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="hmac"><a href="#hmac" class="headerlink" title="hmac"></a>hmac</h3><ul>
<li>内置模块实现了标准的Hmac算法，它利用一个key对message计算“杂凑”后的hash，使用hmac算法比标准hash算法更安全，因为针对相同的message，不同的key会产生不同的hash<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import hmac</span><br><span class="line"></span><br><span class="line">message = b&apos;hello, world.&apos;</span><br><span class="line">key = b&apos;secret&apos;</span><br><span class="line">h = hmac.new(key, message, digestmod=&apos;MD5&apos;) //随机key, 注意使用的bytes类型</span><br><span class="line">print(h.hexdigest())</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="itertools"><a href="#itertools" class="headerlink" title="itertools"></a>itertools</h3><ul>
<li>Python的内建模块itertools提供了非常有用的用于操作迭代对象的函数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import itertools</span><br><span class="line"></span><br><span class="line">natuals=itertools.count(1) //创建一个无限迭代器</span><br><span class="line">cs=itertools.cycle(&apos;abc&apos;)  //创建一个无限循环一个序列的迭代器</span><br><span class="line">ns=itertools.repeat(&apos;A&apos;, 3) //创建一个无限重复一个序列的迭代器, 第二个参数可以限定重复次数</span><br><span class="line">ns=itertools.takewhile(lambda x:x&lt;=10, natuals) //截取一个有限的序列</span><br><span class="line">list(ns)</span><br><span class="line">for c in itertools.chain(&apos;abc&apos;, &apos;xyz&apos;):  //串联两个序列, 创建一个迭代器</span><br><span class="line">    print(c)</span><br><span class="line">for key, group in itertools.groupby(&apos;AAABBBCCC&apos;): //迭代器中相同元素分组</span><br><span class="line">    print(key, list(group))</span><br><span class="line">for key, group in itertools.groupby(&apos;AaaBbbCcc&apos;, lambda c:c.upper()): //制定分组限定条件</span><br><span class="line">    print(key, list(group))</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="contextlib"><a href="#contextlib" class="headerlink" title="contextlib"></a>contextlib</h3><ul>
<li><p>某个对象方法的前后添加代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">from contextlib import contextmanager</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Query(object):</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    def query(self):</span><br><span class="line">        print(&apos;query info about &#123;0&#125;&apos;.format(self.name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@contextmanager</span><br><span class="line">def create_query(name):</span><br><span class="line">    print(&apos;begin&apos;)</span><br><span class="line">    q = Query(name)</span><br><span class="line">    yield q</span><br><span class="line">    print(&apos;end&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">with create_query(&apos;tinytinycn&apos;) as q:</span><br><span class="line">    q.query()</span><br></pre></td></tr></table></figure>
</li>
<li><p>某段代码前后添加特定代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from contextlib import contextmanager</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@contextmanager</span><br><span class="line">def tag(name):</span><br><span class="line">    print(&apos;&lt;&#123;0&#125;&gt;&apos;.format(name))</span><br><span class="line">    yield</span><br><span class="line">    print(&apos;&lt;/&#123;0&#125;&gt;&apos;.format(name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">with tag(&apos;div&apos;):</span><br><span class="line">    print(&apos;\thello&apos;)</span><br><span class="line">    print(&apos;\tworld&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果某个对象没有实现上下文, 就不能用于with语句, 需要使用closing()把对象变成上下文对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from contextlib improt closing</span><br><span class="line">from urllib.request import urlopen</span><br><span class="line"></span><br><span class="line">with closing(urlopen(&apos;http://www.python.org&apos;)) as page:</span><br><span class="line">    for line in page:</span><br><span class="line">        print(line)</span><br></pre></td></tr></table></figure>
</li>
<li><p>closing是一个进过@contextmanager修饰的generator</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@contextmanager</span><br><span class="line">def closing(thing):</span><br><span class="line">    try:</span><br><span class="line">        yield thing</span><br><span class="line">    finally:</span><br><span class="line">        thing.close()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="urllib"><a href="#urllib" class="headerlink" title="urllib"></a>urllib</h3><ul>
<li>urllib提供的功能就是利用程序去执行各种HTTP请求<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">from urllib import request, parse</span><br><span class="line"></span><br><span class="line">print(&apos;login to weibo.cn...&apos;)</span><br><span class="line">email = input(&apos;email: &apos;)</span><br><span class="line">password = input(&apos;password: &apos;)</span><br><span class="line">login_data = parse.urlencode([</span><br><span class="line">    (&apos;username&apos;, email),</span><br><span class="line">    (&apos;password&apos;, password),</span><br><span class="line">    (&apos;client_id&apos;, &apos;&apos;),</span><br><span class="line">    (&apos;savestate&apos;, 1),</span><br><span class="line">    (&apos;ec&apos;, &apos;&apos;),</span><br><span class="line">    (&apos;pagerefer&apos;, &apos;https://passport.weibo.cn/signin/welcome?entry=mweibo&amp;r=http%3A%2F%2Fm.weibo.cn%2F&apos;)</span><br><span class="line">])</span><br><span class="line"># post header</span><br><span class="line">req = request.Request(&apos;https://passport.weibo.cn/sso/login&apos;)</span><br><span class="line">req.add_header(&apos;Origin&apos;, &apos;https://passport.weibo.cn&apos;)</span><br><span class="line">req.add_header(&apos;User-Agent&apos;,</span><br><span class="line">               &apos;Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25&apos;)</span><br><span class="line">req.add_header(&apos;Referer&apos;,</span><br><span class="line">               &apos;https://passport.weibo.cn/signin/login?entry=mweibo&amp;res=wel&amp;wm=3349&amp;r=http%3A%2F%2Fm.weibo.cn%2F&apos;)</span><br><span class="line"># 代理</span><br><span class="line">proxy_handler = request.ProxyHandler(&#123;&apos;http&apos;: &apos;http://www.example.com:3128/&apos;&#125;)</span><br><span class="line">proxy_basic_auth_handler = request.ProxyBasicAuthHandler()</span><br><span class="line">proxy_basic_auth_handler.add_password(&apos;realm&apos;, &apos;host&apos;, &apos;username&apos;, &apos;password&apos;)</span><br><span class="line">opener = request.build_opener(proxy_handler, proxy_basic_auth_handler)</span><br><span class="line"></span><br><span class="line"># 提交data</span><br><span class="line">with opener.open(req, data=login_data.encode(&apos;utf-8&apos;)) as f:</span><br><span class="line">    print(&apos;status: &apos;, f.status, f.reason)</span><br><span class="line">    for k, v in f.getheaders():</span><br><span class="line">        print(&apos;&#123;0&#125;: &#123;1&#125;&apos;.format(k, v))</span><br><span class="line">    print(&apos;data: &apos;, f.read().decode(&apos;utf-8&apos;))</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="HTMLParse"><a href="#HTMLParse" class="headerlink" title="HTMLParse"></a>HTMLParse</h3><ul>
<li>解析html<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">from html.parser import HTMLParser</span><br><span class="line">from html.entities import name2codepoint</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MyHTMLParser(HTMLParser):</span><br><span class="line">    def handle_starttag(self, tag, attrs):</span><br><span class="line">        print(&apos;&lt;&#123;0&#125;&gt;&apos;.format(tag))</span><br><span class="line"></span><br><span class="line">    def handle_endtag(self, tag):</span><br><span class="line">        print(&apos;&lt;/&#123;0&#125;&gt;&apos;.format(tag))</span><br><span class="line"></span><br><span class="line">    def handle_startendtag(self, tag, attrs):</span><br><span class="line">        print(&apos;&lt;&#123;0&#125;/&gt;&apos;.format(tag))</span><br><span class="line"></span><br><span class="line">    def handle_data(self, data):</span><br><span class="line">        print(data)</span><br><span class="line"></span><br><span class="line">    def handle_comment(self, data):</span><br><span class="line">        print(&apos;&lt;!--&apos;, data, &apos;--&gt;&apos;)</span><br><span class="line"></span><br><span class="line">    def handle_entityref(self, name):</span><br><span class="line">        print(&apos;&amp;&#123;0&#125;&apos;.format(name))</span><br><span class="line"></span><br><span class="line">    def handle_charref(self, name):</span><br><span class="line">        print(&apos;&amp;#&#123;0&#125;&apos;.format(name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">html_parser = MyHTMLParser()</span><br><span class="line">html_parser.feed(</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">    &lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;!-- test html parser --&gt;&lt;p&gt;Some &lt;a href=\&quot;#\&quot;&gt;html&lt;/a&gt; HTML&amp;nbsp;tutorial...&lt;br&gt;END&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/tinytinycn.github.io/2019/03/25/python-13-virtualenv/" class="prev">上一篇</a><a href="/tinytinycn.github.io/2018/09/14/python-11-正则/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2019 <a href="http://github.com">hang</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>